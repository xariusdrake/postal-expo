{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _jsxFileName = \"/Users/xrs/DATA/Project/postalvn/postal-mobile/screens/postal/myPostal.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { useSubscription, useLazyQuery, gql } from \"@apollo/client\";\nimport { List, ListItem, Divider, Text, Icon, Button, TopNavigation, TopNavigationAction } from \"@ui-kitten/components\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\nimport { connect } from \"react-redux\";\nimport { QUERY_GET_ALL_MY_POSTAL, QUERY_GET_INFO_USER } from \"../../graphql/query\";\nvar REALTIME_QUERY_GET_ALL_MY_POSTAL = gql(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\tsubscription Mobie_GetAllMyPostal($uid: Int!) {\\n\\t\\tpostals(where: { uid: { _eq: $uid }, is_deleted: { _eq: 0 } }) {\\n\\t\\t\\tid\\n\\t\\t\\timage_url\\n\\t\\t\\tis_actived\\n\\t\\t\\tis_approved\\n\\t\\t\\tis_deleted\\n\\t\\t\\tlat\\n\\t\\t\\tlng\\n\\t\\t\\tname\\n\\t\\t\\tphone\\n\\t\\t\\tpostal_code\\n\\t\\t\\tregion_id\\n\\t\\t\\tstatus\\n\\t\\t\\ttype\\n\\t\\t\\temail\\n\\t\\t\\tcreated_at\\n\\t\\t\\tuid\\n\\t\\t\\taddress\\n\\t\\t\\tcode_area\\n\\t\\t\\tarea_level1_index\\n\\t\\t\\tarea_level2_index\\n\\t\\t\\tarea_level3_index\\n\\t\\t}\\n\\t}\\n\"])));\n\nfunction MyPostalScreen(props) {\n  var _useLazyQuery = useLazyQuery(QUERY_GET_INFO_USER, {\n    fetchPolicy: \"no-cache\",\n    onCompleted: function onCompleted(dataUser) {\n      console.log(\"xxx onCompleted\");\n      console.log(62, dataUser);\n      console.log(63, dataUser[0]);\n      console.log(64, dataUser.users[0].fullname);\n      props.storeUserInfo(dataUser.users[0]);\n      setLoading(false);\n    },\n    onError: function onError(errorUser) {\n      console.log(\"onError\");\n      console.log(errorUser);\n    }\n  }),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getInfoUser = _useLazyQuery2[0],\n      _useLazyQuery2$ = _useLazyQuery2[1],\n      loadingUser = _useLazyQuery2$.loading,\n      errorUser = _useLazyQuery2$.error,\n      dataUser = _useLazyQuery2$.data;\n\n  console.log(399, props.infos.id);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      myPostalList = _useState2[0],\n      saveMyPostalList = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    if (props.infos.id != null) {\n      getInfoUser({\n        variables: {\n          uid: props.infos.id\n        }\n      });\n    }\n  }, []);\n\n  var waitingLabel = function waitingLabel() {\n    return React.createElement(Button, {\n      size: \"tiny\",\n      status: \"warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 4\n      }\n    }, \"Ch\\u1EDD duy\\u1EC7t\");\n  };\n\n  var approvedLabel = function approvedLabel() {\n    return React.createElement(Button, {\n      size: \"tiny\",\n      status: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 4\n      }\n    }, \"\\u0110\\xE3 duy\\u1EC7t\");\n  };\n\n  var cancelLabel = function cancelLabel() {\n    return React.createElement(Button, {\n      size: \"tiny\",\n      status: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 4\n      }\n    }, \"\\u0110\\xE3 h\\u1EE7y\");\n  };\n\n  var nonActive = function nonActive() {\n    return React.createElement(Button, {\n      size: \"tiny\",\n      status: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 4\n      }\n    }, \"\\u0110\\xE3 b\\u1ECB t\\u1EA1m d\\u1EEBng\");\n  };\n\n  var labelStatus;\n  var uid = props.infos.id;\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item,\n        index = _ref.index;\n\n    if (item.is_actived == 1) {\n      if (item.is_approved == 1) {\n        labelStatus = waitingLabel;\n      } else if (item.is_approved == 2) {\n        labelStatus = approvedLabel;\n      } else if (item.is_approved == 0) {\n        labelStatus = cancelLabel;\n      } else {\n        labelStatus = \"\";\n      }\n    } else {\n      labelStatus = nonActive;\n    }\n\n    return React.createElement(ListItem, {\n      key: item.id,\n      title: item.name,\n      description: item.address,\n      onPress: function onPress() {\n        props.navigation.navigate(\"Postal\", {\n          postal: item,\n          isUpdate: true\n        });\n      },\n      accessoryRight: labelStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 4\n      }\n    });\n  };\n\n  var RefreshIcon = function RefreshIcon(props) {\n    return React.createElement(Icon, _extends({}, props, {\n      name: \"refresh-outline\",\n      onPress: function onPress() {\n        getInfoUser({\n          variables: {\n            uid: uid\n          }\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 3\n      }\n    }));\n  };\n\n  var renderRightActions = function renderRightActions() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 3\n      }\n    }, React.createElement(TopNavigationAction, {\n      icon: RefreshIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 4\n      }\n    }));\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      height: Dimensions.get(\"window\").height,\n      backgroundColor: \"#fff\",\n      paddingTop: Platform.OS === \"android\" ? 25 : 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 3\n    }\n  }, !props.token && React.createElement(View, {\n    style: _objectSpread({}, styles.container),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    category: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 6\n    }\n  }, \"\\u0110\\u1EC3 \\u0111\\u0103ng k\\xFD m\\xE3 b\\u01B0u ch\\xEDnh.\", \"\\n\", \"\\u0110\\u1EA7u ti\\xEAn, h\\xE3y \\u0111\\u0103ng nh\\u1EADp\"), React.createElement(Button, {\n    size: \"small\",\n    appearance: \"outline\",\n    status: \"info\",\n    onPress: function onPress() {\n      props.navigation.navigate(\"SignIn\");\n    },\n    style: {\n      borderColor: \"#0469c1\",\n      color: \"#0469c1\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 6\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp\")), props.token.length > 1 && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 5\n    }\n  }, React.createElement(TopNavigation, {\n    alignment: \"center\",\n    title: \"\\u0110\\u1ECBa \\u0111i\\u1EC3m c\\u1EE7a b\\u1EA1n\",\n    accessoryRight: renderRightActions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 6\n    }\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 6\n    }\n  }), React.createElement(Spinner, {\n    visible: loadingUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 6\n    }\n  }), props.infos.postals.length > 0 && React.createElement(List, {\n    data: props.infos.postals,\n    ItemSeparatorComponent: Divider,\n    renderItem: renderItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }), props.infos.postals.length == 0 && React.createElement(View, {\n    style: [styles.container],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    category: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 8\n    }\n  }, \"B\\u1EA1n ch\\u01B0a c\\xF3 \\u0111\\u1ECBa \\u0111i\\u1EC3m b\\u01B0u ch\\xEDnh\"), React.createElement(Button, {\n    size: \"small\",\n    appearance: \"outline\",\n    status: \"info\",\n    onPress: function onPress() {\n      props.navigation.navigate(\"CreatePostal\", {\n        isUpdate: false\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 8\n    }\n  }, \"\\u0110\\u0103ng k\\xFD m\\xE3 b\\u01B0u ch\\xEDnh\"))));\n}\n\nvar styles = StyleSheet.create({\n  title: {\n    paddingTop: 0,\n    padding: 17,\n    backgroundColor: \"#fff\",\n    textAlign: \"center\"\n  },\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: -70\n  },\n  loadingView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"transparent\"\n  },\n  current20: {\n    color: \"#033C47\",\n    fontSize: 20\n  }\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    storeData: function storeData(token) {\n      dispatch({\n        type: \"saveToken\",\n        token: token\n      });\n    },\n    storeUserInfo: function storeUserInfo(infos) {\n      dispatch({\n        type: \"saveUserInfo\",\n        infos: infos\n      });\n    }\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    infos: state.infos,\n    token: state.token\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyPostalScreen);","map":{"version":3,"sources":["/Users/xrs/DATA/Project/postalvn/postal-mobile/screens/postal/myPostal.js"],"names":["React","useState","useEffect","useSubscription","useLazyQuery","gql","List","ListItem","Divider","Text","Icon","Button","TopNavigation","TopNavigationAction","Spinner","connect","QUERY_GET_ALL_MY_POSTAL","QUERY_GET_INFO_USER","REALTIME_QUERY_GET_ALL_MY_POSTAL","MyPostalScreen","props","fetchPolicy","onCompleted","dataUser","console","log","users","fullname","storeUserInfo","setLoading","onError","errorUser","getInfoUser","loadingUser","loading","error","data","infos","id","myPostalList","saveMyPostalList","variables","uid","waitingLabel","approvedLabel","cancelLabel","nonActive","labelStatus","renderItem","item","index","is_actived","is_approved","name","address","navigation","navigate","postal","isUpdate","RefreshIcon","renderRightActions","height","Dimensions","get","backgroundColor","paddingTop","Platform","OS","token","styles","container","title","borderColor","color","length","postals","StyleSheet","create","padding","textAlign","flex","justifyContent","alignItems","marginTop","loadingView","current20","fontSize","mapDispatchToProps","dispatch","storeData","type","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport {\n\tStyleSheet,\n\tView,\n\tSafeAreaView,\n\tDimensions,\n\tPlatform,\n} from \"react-native\";\n\nimport { useSubscription, useLazyQuery, gql } from \"@apollo/client\";\nimport {\n\tList,\n\tListItem,\n\tDivider,\n\tText,\n\tIcon,\n\tButton,\n\tTopNavigation,\n\tTopNavigationAction,\n} from \"@ui-kitten/components\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\n// import { FontAwesome5 } from \"@expo/vector-icons\";\n\nimport { connect } from \"react-redux\";\n\nimport {\n\tQUERY_GET_ALL_MY_POSTAL,\n\tQUERY_GET_INFO_USER,\n} from \"../../graphql/query\";\n\nconst REALTIME_QUERY_GET_ALL_MY_POSTAL = gql`\n\tsubscription Mobie_GetAllMyPostal($uid: Int!) {\n\t\tpostals(where: { uid: { _eq: $uid }, is_deleted: { _eq: 0 } }) {\n\t\t\tid\n\t\t\timage_url\n\t\t\tis_actived\n\t\t\tis_approved\n\t\t\tis_deleted\n\t\t\tlat\n\t\t\tlng\n\t\t\tname\n\t\t\tphone\n\t\t\tpostal_code\n\t\t\tregion_id\n\t\t\tstatus\n\t\t\ttype\n\t\t\temail\n\t\t\tcreated_at\n\t\t\tuid\n\t\t\taddress\n\t\t\tcode_area\n\t\t\tarea_level1_index\n\t\t\tarea_level2_index\n\t\t\tarea_level3_index\n\t\t}\n\t}\n`;\n\nfunction MyPostalScreen(props) {\n\tconst [\n\t\tgetInfoUser,\n\t\t{ loading: loadingUser, error: errorUser, data: dataUser },\n\t] = useLazyQuery(QUERY_GET_INFO_USER, {\n\t\tfetchPolicy: \"no-cache\",\n\t\tonCompleted: (dataUser) => {\n\t\t\tconsole.log(\"xxx onCompleted\");\n\t\t\tconsole.log(62, dataUser);\n\t\t\tconsole.log(63, dataUser[0]);\n\t\t\tconsole.log(64, dataUser.users[0].fullname);\n\t\t\t// console.log(63, dataUser.full);\n\t\t\t// saveMyPostalList(dataUser.users[0].postals);\n\t\t\tprops.storeUserInfo(dataUser.users[0]);\n\n\t\t\tsetLoading(false);\n\n\t\t\t// setAllPostalList(data.postals);\n\t\t},\n\t\tonError: (errorUser) => {\n\t\t\tconsole.log(\"onError\");\n\t\t\tconsole.log(errorUser);\n\t\t},\n\t});\n\n\tconsole.log(399, props.infos.id);\n\n\tconst [myPostalList, saveMyPostalList] = useState({});\n\tconst [loading, setLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (props.infos.id != null) {\n\t\t\tgetInfoUser({ variables: { uid: props.infos.id } });\n\t\t}\n\t}, []);\n\n\t// if (props.token.length > 0) {\n\t// \tgetAllMyPostal({ variables: { uid: props.infos.id } });\n\t// }\n\n\tconst waitingLabel = () => {\n\t\treturn (\n\t\t\t<Button size=\"tiny\" status=\"warning\">\n\t\t\t\tChờ duyệt\n\t\t\t</Button>\n\t\t);\n\t};\n\n\tconst approvedLabel = () => {\n\t\treturn (\n\t\t\t<Button size=\"tiny\" status=\"success\">\n\t\t\t\tĐã duyệt\n\t\t\t</Button>\n\t\t);\n\t};\n\n\tconst cancelLabel = () => {\n\t\treturn (\n\t\t\t<Button size=\"tiny\" status=\"danger\">\n\t\t\t\tĐã hủy\n\t\t\t</Button>\n\t\t);\n\t};\n\n\tconst nonActive = () => {\n\t\treturn (\n\t\t\t<Button size=\"tiny\" status=\"danger\">\n\t\t\t\tĐã bị tạm dừng\n\t\t\t</Button>\n\t\t);\n\t};\n\n\tlet labelStatus;\n\tlet uid = props.infos.id;\n\n\tlet renderItem = ({ item, index }) => {\n\t\t// console.log(\"info my item postal\");\n\t\t// console.log(item);\n\n\t\tif (item.is_actived == 1) {\n\t\t\tif (item.is_approved == 1) {\n\t\t\t\tlabelStatus = waitingLabel;\n\t\t\t} else if (item.is_approved == 2) {\n\t\t\t\tlabelStatus = approvedLabel;\n\t\t\t} else if (item.is_approved == 0) {\n\t\t\t\tlabelStatus = cancelLabel;\n\t\t\t} else {\n\t\t\t\tlabelStatus = \"\";\n\t\t\t}\n\t\t} else {\n\t\t\tlabelStatus = nonActive;\n\t\t}\n\n\t\treturn (\n\t\t\t<ListItem\n\t\t\t\tkey={item.id}\n\t\t\t\ttitle={item.name}\n\t\t\t\tdescription={item.address}\n\t\t\t\tonPress={() => {\n\t\t\t\t\t// console.log(\"click move place\");\n\n\t\t\t\t\tprops.navigation.navigate(\"Postal\", {\n\t\t\t\t\t\tpostal: item,\n\t\t\t\t\t\tisUpdate: true,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\taccessoryRight={labelStatus}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst RefreshIcon = (props) => (\n\t\t<Icon\n\t\t\t{...props}\n\t\t\tname=\"refresh-outline\"\n\t\t\tonPress={() => {\n\t\t\t\tgetInfoUser({ variables: { uid: uid } });\n\t\t\t}}\n\t\t/>\n\t);\n\n\tconst renderRightActions = () => (\n\t\t<React.Fragment>\n\t\t\t<TopNavigationAction icon={RefreshIcon} />\n\t\t</React.Fragment>\n\t);\n\n\treturn (\n\t\t<SafeAreaView\n\t\t\tstyle={{\n\t\t\t\theight: Dimensions.get(\"window\").height,\n\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t\tpaddingTop: Platform.OS === \"android\" ? 25 : 0,\n\t\t\t}}\n\t\t>\n\t\t\t{!props.token && (\n\t\t\t\t<View style={{ ...styles.container }}>\n\t\t\t\t\t<Text style={styles.title} category=\"h6\">\n\t\t\t\t\t\tĐể đăng ký mã bưu chính.{\"\\n\"}Đầu tiên, hãy đăng nhập\n\t\t\t\t\t</Text>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tappearance=\"outline\"\n\t\t\t\t\t\tstatus=\"info\"\n\t\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\t\tprops.navigation.navigate(\"SignIn\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ borderColor: \"#0469c1\", color: \"#0469c1\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\tĐăng nhập\n\t\t\t\t\t</Button>\n\t\t\t\t</View>\n\t\t\t)}\n\n\t\t\t{props.token.length > 1 && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<TopNavigation\n\t\t\t\t\t\talignment=\"center\"\n\t\t\t\t\t\ttitle=\"Địa điểm của bạn\"\n\t\t\t\t\t\taccessoryRight={renderRightActions}\n\t\t\t\t\t/>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<Spinner visible={loadingUser} />\n\t\t\t\t\t{props.infos.postals.length > 0 && (\n\t\t\t\t\t\t<List\n\t\t\t\t\t\t\tdata={props.infos.postals}\n\t\t\t\t\t\t\tItemSeparatorComponent={Divider}\n\t\t\t\t\t\t\trenderItem={renderItem}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{props.infos.postals.length == 0 && (\n\t\t\t\t\t\t<View style={[styles.container]}>\n\t\t\t\t\t\t\t<Text style={styles.title} category=\"h6\">\n\t\t\t\t\t\t\t\tBạn chưa có địa điểm bưu chính\n\t\t\t\t\t\t\t</Text>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tappearance=\"outline\"\n\t\t\t\t\t\t\t\tstatus=\"info\"\n\t\t\t\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\t\t\t\tprops.navigation.navigate(\"CreatePostal\", {\n\t\t\t\t\t\t\t\t\t\tisUpdate: false,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tĐăng ký mã bưu chính\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t)}\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</SafeAreaView>\n\t);\n}\n\nconst styles = StyleSheet.create({\n\ttitle: {\n\t\tpaddingTop: 0,\n\t\tpadding: 17,\n\t\tbackgroundColor: \"#fff\",\n\t\ttextAlign: \"center\",\n\t},\n\n\tcontainer: {\n\t\tflex: 1,\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tmarginTop: -70,\n\t\t// paddingTop: 200,\n\t\t// paddingHorizontal: 25,\n\t\t// backgroundColor: \"#FFFFFF\",\n\t},\n\tloadingView: {\n\t\tflex: 1,\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tbackgroundColor: \"transparent\",\n\t},\n\tcurrent20: {\n\t\tcolor: \"#033C47\",\n\t\tfontSize: 20,\n\t},\n});\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tstoreData: function (token) {\n\t\t\tdispatch({ type: \"saveToken\", token });\n\t\t},\n\t\tstoreUserInfo: function (infos) {\n\t\t\tdispatch({ type: \"saveUserInfo\", infos });\n\t\t},\n\t};\n}\n\nfunction mapStateToProps(state) {\n\treturn { infos: state.infos, token: state.token };\n}\n\n// keep this line at the end\nexport default connect(mapStateToProps, mapDispatchToProps)(MyPostalScreen);\n"]},"metadata":{},"sourceType":"module"}