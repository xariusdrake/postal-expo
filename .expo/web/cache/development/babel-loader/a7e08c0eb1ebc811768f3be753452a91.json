{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _jsxFileName = \"/Users/xrs/DATA/Project/postalvn/postal-mobile/screens/account/changePassword.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Button, Layout, StyleService, Text, Input, Icon, useStyleSheet, TopNavigation, TopNavigationAction, Divider } from \"@ui-kitten/components\";\nimport { connect } from \"react-redux\";\nimport { MUTATION_CHANGE_PASSWORD_USER } from \"../../graphql/query\";\nimport { useMutation } from \"@apollo/client\";\nimport { isEmpty, isMin } from \"../../functions/strings\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\nvar BackIcon = function BackIcon(props) {\n  return React.createElement(Icon, _extends({}, props, {\n    name: \"arrow-back\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 29\n    }\n  }));\n};\n\nfunction ChangePasswordScreen(props) {\n  var _useMutation = useMutation(MUTATION_CHANGE_PASSWORD_USER, {\n    onCompleted: function onCompleted(dataChange) {\n      console.log(\"onCompleted\");\n      setLoading(false);\n      console.log(44, dataChange);\n\n      if (isEmpty(dataChange.update_users.returning[0]) == true) {\n        console.log(\"false\");\n        setTimeout(function () {\n          Alert.alert(\"Mật khẩu hiện tại không chính xác\");\n        }, 800);\n      } else {\n        console.log(\"success\");\n        setCurrentPasswordInput(\"\");\n        setNewPasswordInput(\"\");\n        setReNewPasswordInput(\"\");\n        setTimeout(function () {\n          Alert.alert(\"Mật khẩu đã được thay đổi\");\n        }, 800);\n      }\n    },\n    onError: function onError(errorChange) {\n      console.log(\"onError\");\n      setLoading(false);\n      console.log(errorChange);\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      changePassword = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      errorChange = _useMutation2$.error,\n      calledChange = _useMutation2$.called,\n      loadingChange = _useMutation2$.loading,\n      dataChange = _useMutation2$.data;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPasswordInput = _useState2[0],\n      setCurrentPasswordInput = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newPasswordInput = _useState4[0],\n      setNewPasswordInput = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      reNewPasswordInput = _useState6[0],\n      setReNewPasswordInput = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      secureTextEntry = _useState8[0],\n      setSecureTextEntry = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      dataUpdate = _useState10[0],\n      setDataUpdate = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var styles = useStyleSheet(themedStyles);\n\n  var onClickSubmit = function onClickSubmit() {\n    return _regeneratorRuntime.async(function onClickSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(100, \"onClickSubmit\");\n\n            if (!(currentPasswordInput.length < 1)) {\n              _context.next = 6;\n              break;\n            }\n\n            Alert.alert(\"Vui lòng nhập mật khẩu hiện tại\");\n            return _context.abrupt(\"return\");\n\n          case 6:\n            if (!(newPasswordInput.length < 1)) {\n              _context.next = 11;\n              break;\n            }\n\n            Alert.alert(\"Vui lòng nhập mật khẩu mới\");\n            return _context.abrupt(\"return\");\n\n          case 11:\n            if (!(reNewPasswordInput.length < 1)) {\n              _context.next = 16;\n              break;\n            }\n\n            Alert.alert(\"Vui lòng nhập lại mật khẩu mới\");\n            return _context.abrupt(\"return\");\n\n          case 16:\n            if (!(newPasswordInput != reNewPasswordInput)) {\n              _context.next = 19;\n              break;\n            }\n\n            Alert.alert(\"Mật khẩu mới không giống nhau\");\n            return _context.abrupt(\"return\");\n\n          case 19:\n            setLoading(true);\n            changePassword({\n              variables: {\n                uid: props.infos.id,\n                currentPassword: currentPasswordInput.toString(),\n                newPassword: newPasswordInput.toString()\n              }\n            });\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var renderBackAction = function renderBackAction() {\n    return React.createElement(TopNavigationAction, {\n      icon: BackIcon,\n      onPress: function onPress() {\n        return props.navigation.navigate(\"More\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 3\n      }\n    });\n  };\n\n  var toggleSecureEntry = function toggleSecureEntry() {\n    setSecureTextEntry(!secureTextEntry);\n  };\n\n  var renderIcon = function renderIcon(props) {\n    return React.createElement(TouchableWithoutFeedback, {\n      onPress: toggleSecureEntry,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 3\n      }\n    }, React.createElement(Icon, _extends({}, props, {\n      name: secureTextEntry ? \"eye-off\" : \"eye\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 4\n      }\n    })));\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      paddingTop: 20,\n      height: Dimensions.get(\"window\").height,\n      backgroundColor: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 3\n    }\n  }, React.createElement(Spinner, {\n    visible: loadingChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 4\n    }\n  }), React.createElement(TopNavigation, {\n    alignment: \"center\",\n    title: \"Thay \\u0111\\u1ED5i m\\u1EADt kh\\u1EA9u\",\n    accessoryLeft: renderBackAction,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 4\n    }\n  }), React.createElement(View, {\n    style: [themedStyles.formContainer],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 4\n    }\n  }, React.createElement(Input, {\n    placeholder: \"\",\n    style: {\n      paddingBottom: 10\n    },\n    label: \"M\\u1EADt kh\\u1EA9u hi\\u1EC7n t\\u1EA1i\",\n    autoCapitalize: \"words\",\n    value: currentPasswordInput,\n    onChangeText: function onChangeText(text) {\n      return setCurrentPasswordInput(text);\n    },\n    secureTextEntry: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }), React.createElement(Input, {\n    style: {\n      paddingBottom: 10\n    },\n    placeholder: \"\",\n    label: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\",\n    autoCapitalize: \"words\",\n    value: newPasswordInput,\n    onChangeText: function onChangeText(text) {\n      return setNewPasswordInput(text);\n    },\n    secureTextEntry: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }), React.createElement(Input, {\n    placeholder: \"\",\n    label: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi\",\n    autoCapitalize: \"words\",\n    value: reNewPasswordInput,\n    onChangeText: function onChangeText(text) {\n      return setReNewPasswordInput(text);\n    },\n    secureTextEntry: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  })), React.createElement(Button, {\n    style: styles.doneButton,\n    onPress: function onPress() {\n      return onClickSubmit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 4\n    }\n  }, \"Thay \\u0111\\u1ED5i\"));\n}\n\nvar themedStyles = StyleService.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"background-basic-color-2\"\n  },\n  containerInput: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  formContainer: {\n    padding: 20,\n    backgroundColor: \"#fff\"\n  },\n  contentContainer: {\n    paddingBottom: 24\n  },\n  photoSection: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: 16\n  },\n  avatar: {\n    alignSelf: \"center\"\n  },\n  profileAvatar: {\n    aspectRatio: 1.0,\n    height: 124,\n    alignSelf: \"center\"\n  },\n  photo: {\n    aspectRatio: 1.0,\n    height: 76\n  },\n  photoButton: {\n    aspectRatio: 1.0,\n    height: 32,\n    borderRadius: 16\n  },\n  nameSection: {\n    flex: 1,\n    marginHorizontal: 8\n  },\n  description: {\n    padding: 24,\n    backgroundColor: \"background-basic-color-1\"\n  },\n  doneButton: {\n    marginHorizontal: 24,\n    borderColor: \"#0469c1\",\n    backgroundColor: \"#0469c1\"\n  },\n  setting: {\n    padding: 16\n  },\n  emailSetting: {\n    marginTop: 24\n  }\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    storeData: function storeData(token) {\n      dispatch({\n        type: \"saveToken\",\n        token: token\n      });\n    },\n    storeUserInfo: function storeUserInfo(infos) {\n      dispatch({\n        type: \"saveUserInfo\",\n        infos: infos\n      });\n    }\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    infos: state.infos,\n    token: state.token\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePasswordScreen);","map":{"version":3,"sources":["/Users/xrs/DATA/Project/postalvn/postal-mobile/screens/account/changePassword.js"],"names":["React","useState","useEffect","Button","Layout","StyleService","Text","Input","Icon","useStyleSheet","TopNavigation","TopNavigationAction","Divider","connect","MUTATION_CHANGE_PASSWORD_USER","useMutation","isEmpty","isMin","Spinner","BackIcon","props","ChangePasswordScreen","onCompleted","dataChange","console","log","setLoading","update_users","returning","setTimeout","Alert","alert","setCurrentPasswordInput","setNewPasswordInput","setReNewPasswordInput","onError","errorChange","changePassword","error","calledChange","called","loadingChange","loading","data","currentPasswordInput","newPasswordInput","reNewPasswordInput","secureTextEntry","setSecureTextEntry","dataUpdate","setDataUpdate","styles","themedStyles","onClickSubmit","length","variables","uid","infos","id","currentPassword","toString","newPassword","renderBackAction","navigation","navigate","toggleSecureEntry","renderIcon","paddingTop","height","Dimensions","get","backgroundColor","formContainer","paddingBottom","text","doneButton","create","container","flex","containerInput","flexDirection","justifyContent","alignItems","padding","contentContainer","photoSection","paddingHorizontal","avatar","alignSelf","profileAvatar","aspectRatio","photo","photoButton","borderRadius","nameSection","marginHorizontal","description","borderColor","setting","emailSetting","marginTop","mapDispatchToProps","dispatch","storeData","token","type","storeUserInfo","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n\tScrollView,\n\tView,\n\tSafeAreaView,\n\tTouchableOpacity,\n\tTouchableWithoutFeedback,\n\tDimensions,\n\tAlert,\n} from \"react-native\";\nimport {\n\tButton,\n\tLayout,\n\tStyleService,\n\tText,\n\tInput,\n\tIcon,\n\tuseStyleSheet,\n\tTopNavigation,\n\tTopNavigationAction,\n\tDivider,\n} from \"@ui-kitten/components\";\n\n// import { ProfileSetting } from \"./extra/profile-setting.component\";\n// import { ProfileAvatar } from \"./extra/profile-avatar.component\";\n// import { CameraIcon } from \"./extra/icons\";\n// import { Profile } from \"./extra/data\";\n\nimport { connect } from \"react-redux\";\n\nimport { MUTATION_CHANGE_PASSWORD_USER } from \"../../graphql/query\";\n\nimport { useMutation } from \"@apollo/client\";\nimport { isEmpty, isMin } from \"../../functions/strings\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\n// const profile: Profile = Profile.jenniferGreen();\n\nconst BackIcon = (props) => <Icon {...props} name=\"arrow-back\" />;\n\nfunction ChangePasswordScreen(props) {\n\tconst [\n\t\tchangePassword,\n\t\t{\n\t\t\terror: errorChange,\n\t\t\tcalled: calledChange,\n\t\t\tloading: loadingChange,\n\t\t\tdata: dataChange,\n\t\t},\n\t] = useMutation(MUTATION_CHANGE_PASSWORD_USER, {\n\t\tonCompleted: (dataChange) => {\n\t\t\tconsole.log(\"onCompleted\");\n\t\t\tsetLoading(false);\n\t\t\tconsole.log(44, dataChange);\n\n\t\t\tif (isEmpty(dataChange.update_users.returning[0]) == true) {\n\t\t\t\tconsole.log(\"false\");\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tAlert.alert(\"Mật khẩu hiện tại không chính xác\");\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"success\");\n\t\t\t\tsetCurrentPasswordInput(\"\");\n\t\t\t\tsetNewPasswordInput(\"\");\n\t\t\t\tsetReNewPasswordInput(\"\");\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tAlert.alert(\"Mật khẩu đã được thay đổi\");\n\t\t\t\t}, 800);\n\t\t\t}\n\t\t},\n\t\tonError: (errorChange) => {\n\t\t\tconsole.log(\"onError\");\n\t\t\tsetLoading(false);\n\t\t\tconsole.log(errorChange);\n\t\t},\n\t});\n\n\tconst [currentPasswordInput, setCurrentPasswordInput] = useState(\"\");\n\tconst [newPasswordInput, setNewPasswordInput] = useState(\"\");\n\tconst [reNewPasswordInput, setReNewPasswordInput] = useState(\"\");\n\tconst [secureTextEntry, setSecureTextEntry] = useState(true);\n\n\tconst [dataUpdate, setDataUpdate] = useState({});\n\tconst [loading, setLoading] = useState(false);\n\n\tconst styles = useStyleSheet(themedStyles);\n\n\tconst onClickSubmit = async () => {\n\t\tconsole.log(100, \"onClickSubmit\");\n\n\t\tif (currentPasswordInput.length < 1) {\n\t\t\tAlert.alert(\"Vui lòng nhập mật khẩu hiện tại\");\n\t\t\treturn;\n\t\t} else if (newPasswordInput.length < 1) {\n\t\t\tAlert.alert(\"Vui lòng nhập mật khẩu mới\");\n\t\t\treturn;\n\t\t} else if (reNewPasswordInput.length < 1) {\n\t\t\tAlert.alert(\"Vui lòng nhập lại mật khẩu mới\");\n\t\t\treturn;\n\t\t} else if (newPasswordInput != reNewPasswordInput) {\n\t\t\tAlert.alert(\"Mật khẩu mới không giống nhau\");\n\t\t\treturn;\n\t\t}\n\n\t\tsetLoading(true);\n\n\t\tchangePassword({\n\t\t\tvariables: {\n\t\t\t\tuid: props.infos.id,\n\t\t\t\tcurrentPassword: currentPasswordInput.toString(),\n\t\t\t\tnewPassword: newPasswordInput.toString(),\n\t\t\t},\n\t\t});\n\t};\n\n\tconst renderBackAction = () => (\n\t\t<TopNavigationAction\n\t\t\ticon={BackIcon}\n\t\t\tonPress={() => props.navigation.navigate(\"More\")}\n\t\t/>\n\t);\n\n\tconst toggleSecureEntry = () => {\n\t\tsetSecureTextEntry(!secureTextEntry);\n\t};\n\n\tconst renderIcon = (props) => (\n\t\t<TouchableWithoutFeedback onPress={toggleSecureEntry}>\n\t\t\t<Icon {...props} name={secureTextEntry ? \"eye-off\" : \"eye\"} />\n\t\t</TouchableWithoutFeedback>\n\t);\n\n\treturn (\n\t\t<SafeAreaView\n\t\t\tstyle={{\n\t\t\t\tpaddingTop: 20,\n\t\t\t\theight: Dimensions.get(\"window\").height,\n\t\t\t\tbackgroundColor: \"#fff\",\n\t\t\t}}\n\t\t>\n\t\t\t<Spinner visible={loadingChange} />\n\t\t\t<TopNavigation\n\t\t\t\talignment=\"center\"\n\t\t\t\ttitle=\"Thay đổi mật khẩu\"\n\t\t\t\taccessoryLeft={renderBackAction}\n\t\t\t/>\n\t\t\t<Divider />\n\n\t\t\t<View style={[themedStyles.formContainer]}>\n\t\t\t\t<Input\n\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\tstyle={{ paddingBottom: 10 }}\n\t\t\t\t\tlabel=\"Mật khẩu hiện tại\"\n\t\t\t\t\tautoCapitalize=\"words\"\n\t\t\t\t\tvalue={currentPasswordInput}\n\t\t\t\t\tonChangeText={(text) => setCurrentPasswordInput(text)}\n\t\t\t\t\tsecureTextEntry={true}\n\t\t\t\t/>\n\t\t\t\t<Input\n\t\t\t\t\tstyle={{ paddingBottom: 10 }}\n\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\tlabel=\"Mật khẩu mới\"\n\t\t\t\t\tautoCapitalize=\"words\"\n\t\t\t\t\tvalue={newPasswordInput}\n\t\t\t\t\t// caption=\"Nên ít nhất 8 ký tự\"\n\t\t\t\t\tonChangeText={(text) => setNewPasswordInput(text)}\n\t\t\t\t\tsecureTextEntry={true}\n\t\t\t\t\t/*accessoryRight={renderIcon}*/\n\t\t\t\t/>\n\t\t\t\t<Input\n\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\tlabel=\"Nhập lại mật khẩu mới\"\n\t\t\t\t\tautoCapitalize=\"words\"\n\t\t\t\t\tvalue={reNewPasswordInput}\n\t\t\t\t\tonChangeText={(text) => setReNewPasswordInput(text)}\n\t\t\t\t\tsecureTextEntry={true}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t<Button style={styles.doneButton} onPress={() => onClickSubmit()}>\n\t\t\t\tThay đổi\n\t\t\t</Button>\n\t\t</SafeAreaView>\n\t);\n}\n\nconst themedStyles = StyleService.create({\n\tcontainer: {\n\t\tflex: 1,\n\t\tbackgroundColor: \"background-basic-color-2\",\n\t},\n\tcontainerInput: {\n\t\tflexDirection: \"row\",\n\t\tjustifyContent: \"space-between\",\n\t\talignItems: \"center\",\n\t},\n\tformContainer: {\n\t\tpadding: 20,\n\t\tbackgroundColor: \"#fff\",\n\t},\n\tcontentContainer: {\n\t\tpaddingBottom: 24,\n\t},\n\tphotoSection: {\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\tpaddingHorizontal: 16,\n\t},\n\tavatar: {\n\t\talignSelf: \"center\",\n\t},\n\tprofileAvatar: {\n\t\taspectRatio: 1.0,\n\t\theight: 124,\n\t\talignSelf: \"center\",\n\t},\n\tphoto: {\n\t\taspectRatio: 1.0,\n\t\theight: 76,\n\t},\n\tphotoButton: {\n\t\taspectRatio: 1.0,\n\t\theight: 32,\n\t\tborderRadius: 16,\n\t},\n\tnameSection: {\n\t\tflex: 1,\n\t\tmarginHorizontal: 8,\n\t},\n\tdescription: {\n\t\tpadding: 24,\n\t\tbackgroundColor: \"background-basic-color-1\",\n\t},\n\tdoneButton: {\n\t\tmarginHorizontal: 24,\n\t\tborderColor: \"#0469c1\",\n\t\tbackgroundColor: \"#0469c1\",\n\t},\n\tsetting: {\n\t\tpadding: 16,\n\t},\n\temailSetting: {\n\t\tmarginTop: 24,\n\t},\n});\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tstoreData: function (token) {\n\t\t\tdispatch({ type: \"saveToken\", token });\n\t\t},\n\t\tstoreUserInfo: function (infos) {\n\t\t\tdispatch({ type: \"saveUserInfo\", infos });\n\t\t},\n\t};\n}\n\n// function mapStateToProps(state) {\n// \treturn { infos: state.info, USER_INFO: state.info, token: state.token };\n// }\n\nfunction mapStateToProps(state) {\n\treturn { infos: state.infos, token: state.token };\n}\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(ChangePasswordScreen);\n"]},"metadata":{},"sourceType":"module"}